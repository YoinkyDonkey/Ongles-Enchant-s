<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ongles Enchantés - Galerie</title>
<link rel="icon" href="../Photo/Icon and Logo/nice logo.jpg">
<link rel="stylesheet" href="stylegallery.css">

</head>
<body>

<header class="site-header" id="toppage">
  <a href="index.html"><h1 class="brand">Ongles Enchantés</h1></a>
</header>

<section class="hero">
  <h1>A NEW ERA OF ME</h1>
  <h2>Beauty Salon - Head Spa</h2>
  <a href="/Rendez-vous/index.html" class="btn primary">Prendre un rendez-vous</a>
</section>

<section id="gallery">
  <h2 class="section-title">Notre Galerie</h2>
  <div class="mosaic-grid" id="gallery-grid"></div>
</section>

<div id="lightbox-container"></div>

<!-- CONTACT -->
    <section id="contact">
        <h2 class="section-title">Contactez-nous</h2>
        <div class="contact-grid">
            <div class="contact-card">
                <h3>Adresse</h3>
                <p>7826 Bd Champlain, LaSalle, QC H8P 3V9</p>
                <a href="https://maps.app.goo.gl/E9iszqnZpL5EeMMB7" target="_blank" class="btn outline">Voir sur Google Maps</a>
            </div>
            <div class="contact-card">
                <h3>Téléphone</h3>
                <p>(514) 595-5858</p>
                <a href="tel:5145955858" target="_blank" class="btn outline">Appeler</a>
            </div>
            <div class="contact-card">
                <h3>Réseaux sociaux</h3>
                <p><a href="https://linktr.ee/ongles.enchantes" target="_blank" class="btn outline">Linktree</a></p>
                <p><a href="https://www.facebook.com/Onglesenchanteslasalle" target="_blank" class="btn outline">Facebook</a></p>
                <p><a href="https://www.instagram.com/ongles.enchantes/" target="_blank" class="btn outline">Instagram</a></p>
            </div>
            <div class="contact-card">
                <h3>Rendez-vous</h3>
                 <a href="/Rendez-vous/index.html" target="_blank" class="btn outline">Prendre un rendez-vous</a>


            </div>
        </div>
    </section>

    
    <section class="HeureOuverture1">
            <h1>Heures d'ouverture</h1>
            <ul class="hours-list">
                <li><span class="day">Lundi - Mercredi:</span> <span class="time">9h30 - 18h00</span></li>
                <li><span class="day">Jeudi - Vendredi:</span> <span class="time">9h30 - 20h00</span></li>
                <li><span class="day">Samedi:</span> <span class="time">9h30 - 17h00</span></li>
                <li><span class="day">Dimanche:</span> <span class="time">Fermé</span></li>
            </ul>
    </section>

    <!-- FOOTER -->
    <footer class="site-footer">
        <div class="seo-footer">
            <p>
                Salon d’ongles à LaSalle, Montréal – manucure, pédicure et nail art professionnels.
            </p>
        </div>

        <header class="site-header">
        <a href="#toppage">
        <h1 class="brand">Ongles Enchantés</h1>
        </a>
    </header>
        <p>&copy; 2026 Ongles Enchantés</p>
    </footer>

<script>
const galleryGrid = document.getElementById("gallery-grid");
const lightboxContainer = document.getElementById("lightbox-container");

const BASE_URL = `${window.location.protocol}//${window.location.hostname}:3000`;
const API_URL = `${BASE_URL}/images`;
const UPLOADS_URL = `${BASE_URL}/uploads`;

let images = [];

async function loadGallery() {
  try {
    const res = await fetch(API_URL);
    images = await res.json();
    renderGallery();
  } catch(err) {
    console.error("Failed to load gallery:", err);
    galleryGrid.innerHTML = "<p>Impossible de charger les images.</p>";
  }
}

function renderGallery() {
  galleryGrid.innerHTML = "";
  lightboxContainer.innerHTML = "";

  images.forEach((filename, index) => {
    const id = "img" + (index + 1);
    const prevId = "img" + (index === 0 ? images.length : index);
    const nextId = "img" + (index === images.length - 1 ? 1 : index + 2);

    const isLarge = index % 3 === 0;

    const link = document.createElement("a");
    link.href = "#" + id;
    link.className = "mosaic-item" + (isLarge ? " large" : "");
    const img = document.createElement("img");
    img.src = `${UPLOADS_URL}/${encodeURIComponent(filename)}`;
    img.alt = "Nail Design";
    img.onerror = () => link.remove();
    link.appendChild(img);
    galleryGrid.appendChild(link);

    const lightbox = document.createElement("div");
    lightbox.className = "lightbox";
    lightbox.id = id;
    lightbox.innerHTML = `
      <a href="#_" class="close">&times;</a>
      <a href="#${prevId}" class="prev">&#10094;</a>
      <img src="${UPLOADS_URL}/${encodeURIComponent(filename)}" alt="Nail Design" />
      <a href="#${nextId}" class="next">&#10095;</a>
    `;
    lightboxContainer.appendChild(lightbox);
  });
}

// SSE live updates
const evtSource = new EventSource(`${BASE_URL}/events`);
evtSource.onmessage = e => {
  const event = JSON.parse(e.data);
  if (event.type === "add" && !images.includes(event.filename)) {
    images.push(event.filename);
  } else if (event.type === "delete") {
    images = images.filter(f => f !== event.filename);
  } else if (event.type === "delete-all") {
    images = [];
  }
  renderGallery();
};

loadGallery();
</script>

</body>
</html>
